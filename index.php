<?php
include './config.php';
include './db_connect.inc.php';
include './class/Kneipe.php';
include './class/KneipeHTML.php';
?>
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <link type="text/css" href="css/style.css" rel="stylesheet" media="screen" />
        <link rel="stylesheet" href="js/jquery-ui-1.12.0/jquery-ui.min.css" />
        <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <!-- 	html5 + CSS 3 Template created by miss monorom  http://intensivstation.ch 2011 -->

        <title>Willkommen beim Kneipentest</title>
        <script src="js/jquery-3.0.0.min.js"></script>
        <script src="js/Mottie-tablesorter-08bf513/js/jquery.tablesorter.min.js"></script> 
        <script src="js/animatedtablesorter-0.2.2/tsort.min.js"></script>
        <script src="js/jquery-ui-1.12.0/jquery-ui.min.js"></script>

        <!--Hier werden die Scripte geladen -->
        <script>
            $(document).ready(
                    function () {
                        // Mottie wird über die Classe angesprochen könnte aber 
                        // auch durch ID vergabe eingebunden werden
                        $("table.tablesorter").tablesorter();
                        $("table.tableSorter").tableSort(); // Animated
                        $("#autocomplete").autocomplete({
                            source: "sucheMitJQuerryAutocomplete.php", minLength: 2

                        });
                    });
        </script>
    </head>
    <body>
        <div id="container">
            <header>
                <h2>Willkomen beim Kneipentest</h2>
            </header>
            <nav>
                <h2>Menue links</h2>
                <ul>
                    <li><a href="index.php?navi=1" title="normale Darstellung">Kneipen anzeigen</a></li>
                    <li><a href="index.php?navi=2" title="mit jQuery Tablesorter Plugin">Kneipen anzeigen</a></li>
                    <li><a href="index.php?navi=3" title="mit animiertem jQuery Tablesorter Plugin">Kneipen anzeigen</a></li>
                    <li><a href="index.php?navi=4">Kneipen hinzufügen</a></li>
                </ul>

            </nav>

            <aside>
                <h2>Suche</h2>
                <form action="index.php" method="POST">
                    <input type="text" name="suchstring" value="" size="20" />
                    <input type="submit" value="Absenden" />
                    <input type="reset" />
                    <input type="hidden" name="sent" value="1" />
                </form>
                <form action="index.php" method="POST">
                    <table>
                        <tr>
                            <td><input type="text" id="autocomplete" class="ui-widget" name="suchstring" value="" size="17" /></td>
                        </tr>
                        <tr>
                            <td><input type="submit" /><input type="hidden" name="sent" value="1" /></td>
                        </tr>

                    </table>

                </form>
            </aside>
            <section id="content">
                <article>
                    <h1>Inhalt</h1>
                    <?php
                    $navigation = isset($_GET['navi']) ? $_GET['navi'] : '0';
                    //echo $navigation;
                    switch ($navigation) {
                        case "0":
                            echo "<h2>Willkommen beim Kneipentest</h2>";
                            break;
                        case "1":
                            echo "<h2>Kneipen anzeigen (normal)</h2>";
                            include ("kneipenAnzeigen.inc.php");
                            break;
                        case "2":
                            echo "<h2>Kneipen anzeigen (Tablesorter)</h2>";
                            include ("kneipenAnzeigen2.inc.php");
                            break;
                        case "3":
                            echo "<h2>Kneipen anzeigen (animiert: tablesort)</h2>";
                            include ("kneipenAnzeigen3.inc.php");
                            break;
                        case "4":
                            echo "<h2>Kneipen hinzufügen</h2>";
                            include ("kneipenEintragen.inc.php");
                            break;
                        default:
                            break;
                    }

                    //wurde das suchformular ausgefüllt?
                    $sent = isset($_POST['sent']) ? $_POST['sent'] : '';
                    $suchstring = isset($_POST['suchstring']) ? $_POST['suchstring'] : '';
                    if ($sent && $suchstring) {
                        echo "<h2>Kneipensuche</h2>";
                        include 'suchen.inc.php';
                    }
                    // Eingabeformular
                    $insertsent = isset($_POST['insertsent']) ? $_POST['insertsent'] : '';
                    $kneipenName = isset($_POST['kneipenName']) ? $_POST['kneipenName'] : '';
                    $kneipenArt = isset($_POST['kneipenArt']) ? $_POST['kneipenArt'] : '';
                    $kneipenNote = isset($_POST['kneipenNote']) ? $_POST['kneipenNote'] : '';
                    $kneipenKommentar = isset($_POST['kneipenKommentar']) ? $_POST['kneipenKommentar'] : '';

                    if ($insertsent && $kneipenName && $kneipenKommentar) {
                        echo '<h2>Kneipen eintragen</h2>';
                        Kneipe::insert(new Kneipe($kneipenName, $kneipenArt, $kneipenNote, $kneipenKommentar));
                        include './kneipenAnzeigen.inc.php';
                    }
                    ?>

                </article>
            </section>
            <footer>		
                <h2>Kneipentest ... viel Spaß beim Testen</h2>
            </footer>
        </div>
    </body>
</html>
