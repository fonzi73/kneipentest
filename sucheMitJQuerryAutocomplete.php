<?php

$term = isset($_GET['term']) ? trim($_GET['term']) : '';

// zum Testen
//$term ='B';

if (!empty($term)) {
    include './db_connect.inc.php';
// $suchstring enthÃ¤lt den zu suchenden Teilstring
// sql statement mit prepared statements
    $stmt = $db->prepare("SELECT name FROM kneipen WHERE kommentar LIKE ? "
            . " or name LIKE ? or art LIKE ?");
    $stmt->bindValue(1, "%$term%", PDO::PARAM_STR);
    $stmt->bindValue(2, "%$term%", PDO::PARAM_STR);
    $stmt->bindValue(3, "%$term%", PDO::PARAM_STR);
    $stmt->execute();
    $rows = $stmt->fetchAll(PDO::FETCH_OBJ);
    $names =[];
    foreach ($rows as $row) {
        $names[] = $row->name;
    }
    // zum Testen
    
//    echo '<pre>';
//    print_r($rows);
//    echo '</pre>';
    // Test
    echo json_encode($names);
}
?>

