<?php
include './class/Kneipe.php';
$term = isset($_GET['term']) ? trim($_GET['term']) : '';

// zum Testen
//$term ='Bie';

if (!empty($term)) {
    
//    include './db_connect.inc.php';
//// $suchstring enthÃ¤lt den zu suchenden Teilstring
//// sql statement mit prepared statements
//    $stmt = $db->prepare("SELECT kneipenname FROM kneipen WHERE kommentar LIKE ? "
//            . " or kneipenname LIKE ? or art LIKE ?");
//    $stmt->bindValue(1, "%$term%", PDO::PARAM_STR);
//    $stmt->bindValue(2, "%$term%", PDO::PARAM_STR);
//    $stmt->bindValue(3, "%$term%", PDO::PARAM_STR);
//    $stmt->execute();
//    $rows = $stmt->fetchAll(PDO::FETCH_OBJ);
    $rows = Kneipe::getByNameLikeness($term);
    $names =[];
    foreach ($rows as $row) {
        $names[] = $row->getKneipenname();
    }
    // zum Testen
    
//    echo '<pre>';
//    print_r($rows);
//    echo '</pre>';
    // Test
    echo json_encode($names);
}
?>

